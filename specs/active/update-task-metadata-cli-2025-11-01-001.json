{
  "spec_id": "update-task-metadata-cli-2025-11-01-001",
  "generated": "2025-11-01T00:00:00Z",
  "last_updated": "2025-11-01T13:12:16.324211Z",
  "metadata": {
    "title": "Add sdd update-task-metadata CLI Command",
    "description": "Implement CLI command to update individual task metadata fields in SDD specs",
    "status": "draft",
    "estimated_hours": 8,
    "complexity": "medium"
  },
  "hierarchy": {
    "spec-root": {
      "type": "spec",
      "title": "Add sdd update-task-metadata CLI Command",
      "status": "pending",
      "parent": null,
      "children": [
        "phase-1",
        "phase-2"
      ],
      "total_tasks": 14,
      "completed_tasks": 0,
      "metadata": {
        "description": "Implement a CLI command to update individual task metadata fields in SDD specs, addressing the issue where metadata like file_path becomes outdated during development"
      }
    },
    "phase-1": {
      "type": "phase",
      "title": "Core Command Implementation",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-1-files",
        "phase-1-verify"
      ],
      "total_tasks": 10,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Implement the command handler and argument parser registration",
        "risk_level": "low",
        "estimated_hours": 5
      },
      "dependencies": {
        "blocks": [
          "phase-2"
        ]
      }
    },
    "phase-1-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-1",
      "children": [
        "task-1-1",
        "task-1-2"
      ],
      "total_tasks": 7,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-1-verify"
        ]
      }
    },
    "task-1-1": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_update/cli.py - Add handler function",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [
        "task-1-1-1",
        "task-1-1-2",
        "task-1-1-3",
        "task-1-1-4"
      ],
      "dependencies": {
        "blocks": [
          "task-1-2"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_update/cli.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Create cmd_update_task_metadata(args, printer) function following existing command patterns"
      }
    },
    "task-1-1-1": {
      "type": "subtask",
      "title": "Collect metadata updates from 8 argument flags",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Gather file_path, description, task_category, actual_hours, status_note, verification_type, skill, command from args"
      }
    },
    "task-1-1-2": {
      "type": "subtask",
      "title": "Load spec and validate task exists",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Use find_specs_directory() and load_json_spec() to load spec, verify task_id exists in hierarchy"
      }
    },
    "task-1-1-3": {
      "type": "subtask",
      "title": "Display changes and handle dry-run",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Show old \u2192 new values for each field, exit early if --dry-run flag is set"
      }
    },
    "task-1-1-4": {
      "type": "subtask",
      "title": "Update node and save spec with backup",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Use update_node() to merge metadata, save_json_spec() with backup=True, print success message"
      }
    },
    "task-1-2": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_update/cli.py - Register command",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [
        "task-1-2-1",
        "task-1-2-2",
        "task-1-2-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-1-1"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_update/cli.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Add update-task-metadata subparser in register_update() function around line 1023"
      }
    },
    "task-1-2-1": {
      "type": "subtask",
      "title": "Create subparser with parent_parser",
      "status": "pending",
      "parent": "task-1-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Add p_task_meta = subparsers.add_parser('update-task-metadata', help='...', parents=[parent_parser])"
      }
    },
    "task-1-2-2": {
      "type": "subtask",
      "title": "Add positional and metadata field arguments",
      "status": "pending",
      "parent": "task-1-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Add spec_id, task_id positionals, then 8 optional flags: --file-path, --description, --task-category (with choices), --actual-hours (type=float), --status-note, --verification-type (with choices), --skill, --command"
      }
    },
    "task-1-2-3": {
      "type": "subtask",
      "title": "Set default handler function",
      "status": "pending",
      "parent": "task-1-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Add p_task_meta.set_defaults(func=cmd_update_task_metadata)"
      }
    },
    "phase-1-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-1",
      "children": [
        "verify-1-1",
        "verify-1-2",
        "verify-1-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-1-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-1-1": {
      "type": "verify",
      "title": "Command appears in sdd help output",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "sdd update-task-metadata --help",
        "expected": "Help text displays with all 8 metadata field options"
      }
    },
    "verify-1-2": {
      "type": "verify",
      "title": "Command syntax is correct",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "sdd update-task-metadata TEST_SPEC test-task-1 --file-path test.py --dry-run",
        "expected": "Dry-run shows intended changes without errors"
      }
    },
    "verify-1-3": {
      "type": "verify",
      "title": "No syntax errors or import issues",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "python -m py_compile src/claude_skills/claude_skills/sdd_update/cli.py",
        "expected": "File compiles without syntax errors"
      }
    },
    "phase-2": {
      "type": "phase",
      "title": "Testing & Documentation",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-2-files",
        "phase-2-verify"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-1"
        ],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Validate command functionality and update documentation",
        "risk_level": "low",
        "estimated_hours": 3
      }
    },
    "phase-2-files": {
      "type": "group",
      "title": "Testing Tasks",
      "status": "pending",
      "parent": "phase-2",
      "children": [
        "task-2-1",
        "task-2-2"
      ],
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-2-verify"
        ]
      }
    },
    "task-2-1": {
      "type": "task",
      "title": "Test command on actual spec file",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "investigation",
        "estimated_hours": 1,
        "description": "Test updating file_path on subagent-refactoring-2025-10-28-001.json task-1-1 metadata"
      }
    },
    "task-2-2": {
      "type": "task",
      "title": "Update agents/sdd-update.md with new command documentation",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "agents/sdd-update.md",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Add update-task-metadata command to CLI reference section"
      }
    },
    "phase-2-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-2",
      "children": [
        "verify-2-1",
        "verify-2-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-2-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-2-1": {
      "type": "verify",
      "title": "All metadata fields update correctly",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Each of 8 metadata fields (file_path, description, task_category, actual_hours, status_note, verification_type, skill, command) updates correctly when tested individually",
        "command": ""
      }
    },
    "verify-2-2": {
      "type": "verify",
      "title": "Bulk updates work correctly",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "sdd update-task-metadata SPEC_ID TASK_ID --file-path new.py --task-category implementation --description 'New desc'",
        "expected": "Multiple fields update simultaneously, backup created, original preserved"
      }
    }
  }
}