{
  "spec_id": "sdd-fidelity-review-2025-11-05-001",
  "generated": "2025-11-05T00:00:00Z",
  "last_updated": "2025-11-05T18:43:54.124558Z",
  "metadata": {
    "title": "Implementation Fidelity Review Skill & Subagent",
    "description": "Post-task implementation fidelity reviewer that integrates into sdd-next workflow, uses shared AI consultation infrastructure (common/ai_tools.py) to validate implementations against spec requirements",
    "status": "active",
    "estimated_hours": 32,
    "complexity": "medium",
    "objectives": [
      "Enable automated implementation quality checking after task completion",
      "Integrate seamlessly into sdd-next autonomous workflow",
      "Provide multi-perspective validation through parallel AI consultation",
      "Support per-task configuration via sdd_config.json",
      "Leverage shared AI consultation utilities from ai-consultation-refactor"
    ],
    "depends": [
      "ai-consultation-refactor-2025-11-05-001"
    ],
    "activated_date": "2025-11-05T18:34:34.664153Z",
    "progress_percentage": 7,
    "current_phase": "phase-1"
  },
  "hierarchy": {
    "spec-root": {
      "type": "spec",
      "title": "Implementation Fidelity Review Skill & Subagent",
      "status": "in_progress",
      "parent": null,
      "children": [
        "phase-1",
        "phase-2",
        "phase-3",
        "phase-4",
        "phase-5",
        "phase-6",
        "phase-7"
      ],
      "total_tasks": 55,
      "completed_tasks": 4,
      "metadata": {},
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      }
    },
    "phase-1": {
      "type": "phase",
      "title": "Core Infrastructure & Subagent Definition",
      "status": "in_progress",
      "parent": "spec-root",
      "children": [
        "phase-1-files",
        "phase-1-verify"
      ],
      "total_tasks": 11,
      "completed_tasks": 4,
      "metadata": {
        "purpose": "Create foundational file structure and subagent wrapper that invokes the skill",
        "risk_level": "low",
        "estimated_hours": 4
      },
      "dependencies": {
        "blocks": [
          "phase-2"
        ]
      }
    },
    "phase-1-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "in_progress",
      "parent": "phase-1",
      "children": [
        "task-1-1",
        "task-1-2",
        "task-1-3",
        "task-1-4",
        "task-1-5",
        "task-1-6"
      ],
      "total_tasks": 9,
      "completed_tasks": 4,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-1-verify"
        ],
        "blocked_by": [],
        "depends": []
      }
    },
    "task-1-1": {
      "type": "task",
      "title": "agents/sdd-fidelity-review.md",
      "status": "completed",
      "parent": "phase-1-files",
      "children": [
        "task-1-1-1",
        "task-1-1-2",
        "task-1-1-3"
      ],
      "dependencies": {
        "blocks": [
          "task-1-2"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 3,
      "metadata": {
        "file_path": "agents/sdd-fidelity-review.md",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Create subagent definition following sdd-plan-review-subagent pattern"
      }
    },
    "task-1-1-1": {
      "type": "subtask",
      "title": "Add frontmatter with name, description, model, required_information",
      "status": "completed",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 1,
      "metadata": {
        "task_category": "implementation",
        "started_at": "2025-11-05T18:39:27.993220Z",
        "completed_at": "2025-11-05T18:40:42.112270Z",
        "needs_journaling": false,
        "actual_hours": 0.021,
        "journaled_at": "2025-11-05T18:40:42.124439Z"
      }
    },
    "task-1-1-2": {
      "type": "subtask",
      "title": "Add contract validation section with required parameters",
      "status": "completed",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 1,
      "metadata": {
        "task_category": "implementation",
        "started_at": "2025-11-05T18:41:10.370063Z",
        "completed_at": "2025-11-05T18:41:25.931268Z",
        "needs_journaling": false,
        "actual_hours": 0.004,
        "journaled_at": "2025-11-05T18:41:25.943428Z"
      }
    },
    "task-1-1-3": {
      "type": "subtask",
      "title": "Add skill invocation instructions and error handling",
      "status": "completed",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 1,
      "metadata": {
        "task_category": "implementation",
        "started_at": "2025-11-05T18:41:48.091548Z",
        "completed_at": "2025-11-05T18:42:09.598660Z",
        "needs_journaling": false,
        "actual_hours": 0.006,
        "journaled_at": "2025-11-05T18:42:09.606438Z"
      }
    },
    "task-1-2": {
      "type": "task",
      "title": "skills/sdd-fidelity-review/SKILL.md",
      "status": "in_progress",
      "parent": "phase-1-files",
      "children": [
        "task-1-2-1",
        "task-1-2-2"
      ],
      "dependencies": {
        "blocks": [
          "task-1-3"
        ],
        "blocked_by": [
          "task-1-1"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 1,
      "metadata": {
        "file_path": "skills/sdd-fidelity-review/SKILL.md",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Create skill documentation stub (detailed content in Phase 7)"
      }
    },
    "task-1-2-1": {
      "type": "subtask",
      "title": "Add frontmatter with name and description",
      "status": "completed",
      "parent": "task-1-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 1,
      "metadata": {
        "task_category": "implementation",
        "started_at": "2025-11-05T18:42:33.242707Z",
        "completed_at": "2025-11-05T18:43:54.110117Z",
        "needs_journaling": false,
        "actual_hours": 0.022,
        "journaled_at": "2025-11-05T18:43:54.121109Z"
      }
    },
    "task-1-2-2": {
      "type": "subtask",
      "title": "Add overview and placeholder sections",
      "status": "pending",
      "parent": "task-1-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation"
      }
    },
    "task-1-3": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_fidelity_review/__init__.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-1-4",
          "task-1-5",
          "task-1-6"
        ],
        "blocked_by": [
          "task-1-2"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/__init__.py",
        "task_category": "implementation",
        "estimated_hours": 0.25,
        "description": "Create package initialization file with version and exports"
      }
    },
    "task-1-4": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_fidelity_review/cli.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-1-3"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/cli.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Create CLI stub with register_commands function (implementation in Phase 5)"
      }
    },
    "task-1-5": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_fidelity_review/review.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-1-3"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/review.py",
        "task_category": "implementation",
        "estimated_hours": 0.25,
        "description": "Create review module stub (implementation in Phase 3)"
      }
    },
    "task-1-6": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_fidelity_review/report.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-1-3"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/report.py",
        "task_category": "implementation",
        "estimated_hours": 0.25,
        "description": "Create report module stub (implementation in Phase 5)"
      }
    },
    "phase-1-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-1",
      "children": [
        "verify-1-1",
        "verify-1-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-1-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-1-1": {
      "type": "verify",
      "title": "Package imports successfully",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "python -c 'from claude_skills.sdd_fidelity_review import *'",
        "expected": "No import errors"
      }
    },
    "verify-1-2": {
      "type": "verify",
      "title": "Subagent file follows established pattern",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Frontmatter matches sdd-plan-review-subagent structure",
        "command": ""
      }
    },
    "phase-2": {
      "type": "phase",
      "title": "Configuration System",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-2-files"
      ],
      "dependencies": {
        "blocks": [
          "phase-3"
        ],
        "blocked_by": [
          "phase-1"
        ],
        "depends": []
      },
      "total_tasks": 6,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Configure skill to use shared AI consultation infrastructure",
        "risk_level": "low",
        "estimated_hours": 2
      }
    },
    "phase-2-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-2",
      "children": [
        "task-2-1",
        "task-2-2",
        "task-2-4",
        "task-2-5"
      ],
      "total_tasks": 6,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      }
    },
    "task-2-1": {
      "type": "task",
      "title": "skills/sdd-fidelity-review/config.yaml",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [
        "task-2-1-1",
        "task-2-1-2",
        "task-2-1-3"
      ],
      "dependencies": {
        "blocks": [
          "task-2-2"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "skills/sdd-fidelity-review/config.yaml",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Adapt config.yaml to work with common/ai_config.py from ai-consultation-refactor"
      }
    },
    "task-2-1-1": {
      "type": "subtask",
      "title": "Define gemini, codex, cursor-agent tool configurations compatible with get_multi_agent_pairs()",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation",
        "description": "Use format compatible with common/ai_config.py::get_multi_agent_pairs()"
      }
    },
    "task-2-1-2": {
      "type": "subtask",
      "title": "Add model priorities and flags per tool",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation"
      }
    },
    "task-2-1-3": {
      "type": "subtask",
      "title": "Add consultation and review-specific settings",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation"
      }
    },
    "task-2-2": {
      "type": "task",
      "title": "skills/sdd-fidelity-review/CONFIG.md",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-2-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "skills/sdd-fidelity-review/CONFIG.md",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Document configuration options and structure"
      }
    },
    "task-2-4": {
      "type": "task",
      "title": "Analyze sdd_config.json integration patterns",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-2-5"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "investigation",
        "estimated_hours": 1,
        "description": "Research how other skills integrate with sdd_config.json"
      }
    },
    "task-2-5": {
      "type": "task",
      "title": "Design fidelity_review section structure for sdd_config.json",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-2-4"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "decision",
        "estimated_hours": 0.5,
        "description": "Define JSON schema for per-task enable/disable configuration"
      }
    },
    "phase-3": {
      "type": "phase",
      "title": "Artifact Gathering & Review Logic",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-3-files",
        "phase-3-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-4"
        ],
        "blocked_by": [
          "phase-2"
        ],
        "depends": []
      },
      "total_tasks": 9,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Collect implementation artifacts and build review context",
        "risk_level": "medium",
        "estimated_hours": 8
      }
    },
    "phase-3-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-3",
      "children": [
        "task-3-1",
        "task-3-2",
        "task-3-3",
        "task-3-4",
        "task-3-5",
        "task-3-6",
        "task-3-7"
      ],
      "total_tasks": 7,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-3-verify"
        ],
        "blocked_by": [],
        "depends": []
      }
    },
    "task-3-1": {
      "type": "task",
      "title": "Implement spec and task loading in review.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-3-2"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/review.py",
        "task_category": "implementation",
        "estimated_hours": 1.5,
        "description": "Use sdd_common to load spec JSON and extract task requirements"
      }
    },
    "task-3-2": {
      "type": "task",
      "title": "Implement git diff collection in review.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-3-3"
        ],
        "blocked_by": [
          "task-3-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/review.py",
        "task_category": "implementation",
        "estimated_hours": 1.5,
        "description": "Collect git diff for files changed in task implementation"
      }
    },
    "task-3-3": {
      "type": "task",
      "title": "Research test result integration patterns",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-3-4"
        ],
        "blocked_by": [
          "task-3-2"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "investigation",
        "estimated_hours": 1,
        "description": "Analyze run-tests for test result collection patterns"
      }
    },
    "task-3-4": {
      "type": "task",
      "title": "Implement test result extraction in review.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-3-5"
        ],
        "blocked_by": [
          "task-3-3"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/review.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Extract test results if available for task"
      }
    },
    "task-3-5": {
      "type": "task",
      "title": "Implement journal entry extraction in review.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-3-6"
        ],
        "blocked_by": [
          "task-3-4"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/review.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Load journal entries related to task from spec metadata"
      }
    },
    "task-3-6": {
      "type": "task",
      "title": "Design review prompt template structure",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-3-7"
        ],
        "blocked_by": [
          "task-3-5"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "decision",
        "estimated_hours": 1,
        "description": "Define prompt structure with spec requirements, artifacts, review questions"
      }
    },
    "task-3-7": {
      "type": "task",
      "title": "Implement prompt generation in review.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-3-6"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/review.py",
        "task_category": "implementation",
        "estimated_hours": 1.5,
        "description": "Build structured prompt with all gathered artifacts"
      }
    },
    "phase-3-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-3",
      "children": [
        "verify-3-1",
        "verify-3-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-3-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-3-1": {
      "type": "verify",
      "title": "Spec and task loading works for sample spec",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Can load spec JSON and extract task requirements",
        "command": ""
      }
    },
    "verify-3-2": {
      "type": "verify",
      "title": "Prompt generation produces structured output",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Generated prompt includes all sections: requirements, artifacts, review questions",
        "command": ""
      }
    },
    "phase-4": {
      "type": "phase",
      "title": "Multi-Model Consultation Engine",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-4-files",
        "phase-4-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-5"
        ],
        "blocked_by": [
          "phase-3"
        ],
        "depends": []
      },
      "total_tasks": 6,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Implement fidelity-review-specific logic using shared consultation infrastructure",
        "risk_level": "medium",
        "estimated_hours": 4
      }
    },
    "phase-4-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-4",
      "children": [
        "task-4-1",
        "task-4-3",
        "task-4-4",
        "task-4-5"
      ],
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-4-verify"
        ]
      }
    },
    "task-4-1": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_fidelity_review/consultation.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [
        "task-4-1-3"
      ],
      "dependencies": {
        "blocks": [
          "task-4-3"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/consultation.py",
        "task_category": "implementation",
        "estimated_hours": 1.5,
        "description": "Create lightweight wrapper around common/ai_tools.py for fidelity-review context"
      }
    },
    "task-4-1-3": {
      "type": "subtask",
      "title": "Add error handling and graceful degradation",
      "status": "pending",
      "parent": "task-4-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation"
      }
    },
    "task-4-3": {
      "type": "task",
      "title": "Implement response parsing in consultation.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-4-4"
        ],
        "blocked_by": [
          "task-4-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/consultation.py",
        "task_category": "implementation",
        "estimated_hours": 1.5,
        "description": "Extract issues, recommendations, pass/fail from AI responses"
      }
    },
    "task-4-4": {
      "type": "task",
      "title": "Implement consensus detection in consultation.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-4-5"
        ],
        "blocked_by": [
          "task-4-3"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/consultation.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Identify issues where 2+ models agree"
      }
    },
    "task-4-5": {
      "type": "task",
      "title": "Implement severity categorization in consultation.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-4-4"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/consultation.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Categorize issues as critical/high/medium/low"
      }
    },
    "phase-4-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-4",
      "children": [
        "verify-4-1",
        "verify-4-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-4-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-4-1": {
      "type": "verify",
      "title": "Parallel execution works with mock tools",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Multiple tools execute concurrently and return results",
        "command": ""
      }
    },
    "verify-4-2": {
      "type": "verify",
      "title": "Consensus detection works for sample responses",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Correctly identifies issues reported by 2+ models",
        "command": ""
      }
    },
    "phase-5": {
      "type": "phase",
      "title": "CLI Interface & Commands",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-5-files",
        "phase-5-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-6"
        ],
        "blocked_by": [
          "phase-4"
        ],
        "depends": []
      },
      "total_tasks": 9,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Expose functionality through sdd CLI",
        "risk_level": "low",
        "estimated_hours": 6
      }
    },
    "phase-5-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-5",
      "children": [
        "task-5-1",
        "task-5-2",
        "task-5-3",
        "task-5-4",
        "task-5-5",
        "task-5-6"
      ],
      "total_tasks": 7,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-5-verify"
        ],
        "blocked_by": [],
        "depends": []
      }
    },
    "task-5-1": {
      "type": "task",
      "title": "Implement fidelity-review command in cli.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [
        "task-5-1-1",
        "task-5-1-2"
      ],
      "dependencies": {
        "blocks": [
          "task-5-3"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/cli.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Add argparse command with spec_id, task_id, and options"
      }
    },
    "task-5-1-1": {
      "type": "subtask",
      "title": "Add argument parser for fidelity-review command",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation"
      }
    },
    "task-5-1-2": {
      "type": "subtask",
      "title": "Wire up command to review and consultation modules",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation"
      }
    },
    "task-5-2": {
      "type": "task",
      "title": "Implement list-review-tools command in cli.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-5-6"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/cli.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Show available AI tools and their status"
      }
    },
    "task-5-3": {
      "type": "task",
      "title": "Implement JSON report generation in report.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-5-4"
        ],
        "blocked_by": [
          "task-5-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/report.py",
        "task_category": "implementation",
        "estimated_hours": 1.5,
        "description": "Format review results as structured JSON"
      }
    },
    "task-5-4": {
      "type": "task",
      "title": "Implement markdown report generation in report.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-5-5"
        ],
        "blocked_by": [
          "task-5-3"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/report.py",
        "task_category": "implementation",
        "estimated_hours": 1.5,
        "description": "Format review results as human-readable markdown"
      }
    },
    "task-5-5": {
      "type": "task",
      "title": "Implement console output with PrettyPrinter in report.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-5-4"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_fidelity_review/report.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Use PrettyPrinter for formatted console output with colors"
      }
    },
    "task-5-6": {
      "type": "task",
      "title": "Register CLI commands in main CLI entry point",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-5-2"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/__init__.py",
        "task_category": "implementation",
        "estimated_hours": 0.25,
        "description": "Add sdd_fidelity_review.cli to command registration"
      }
    },
    "phase-5-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-5",
      "children": [
        "verify-5-1",
        "verify-5-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-5-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-5-1": {
      "type": "verify",
      "title": "fidelity-review command works end-to-end",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "sdd fidelity-review test-spec test-task --dry-run",
        "expected": "Command executes without errors and shows what would be reviewed"
      }
    },
    "verify-5-2": {
      "type": "verify",
      "title": "list-review-tools command shows available tools",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "sdd list-review-tools",
        "expected": "Lists gemini, codex, cursor-agent with availability status"
      }
    },
    "phase-6": {
      "type": "phase",
      "title": "sdd-next Integration",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-6-files",
        "phase-6-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-7"
        ],
        "blocked_by": [
          "phase-5"
        ],
        "depends": []
      },
      "total_tasks": 6,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Hook fidelity review into post-implementation workflow",
        "risk_level": "high",
        "estimated_hours": 4
      }
    },
    "phase-6-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-6",
      "children": [
        "task-6-1",
        "task-6-2",
        "task-6-3"
      ],
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-6-verify"
        ]
      }
    },
    "task-6-1": {
      "type": "task",
      "title": "Document fidelity review in sdd-next post-implementation section",
      "status": "pending",
      "parent": "phase-6-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-6-2"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "skills/sdd-next/SKILL.md",
        "task_category": "implementation",
        "estimated_hours": 1.5,
        "description": "Add fidelity review step to post-implementation workflow"
      }
    },
    "task-6-2": {
      "type": "task",
      "title": "Document configuration patterns in sdd-next SKILL.md",
      "status": "pending",
      "parent": "phase-6-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-6-3"
        ],
        "blocked_by": [
          "task-6-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "skills/sdd-next/SKILL.md",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Document per-task enable/disable via sdd_config.json"
      }
    },
    "task-6-3": {
      "type": "task",
      "title": "Document fail-fast behavior in autonomous mode",
      "status": "pending",
      "parent": "phase-6-files",
      "children": [
        "task-6-3-1",
        "task-6-3-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-6-2"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "skills/sdd-next/SKILL.md",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Document how critical issues stop autonomous mode"
      }
    },
    "task-6-3-1": {
      "type": "subtask",
      "title": "Add fail-fast logic to autonomous mode section",
      "status": "pending",
      "parent": "task-6-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation"
      }
    },
    "task-6-3-2": {
      "type": "subtask",
      "title": "Document user override workflow",
      "status": "pending",
      "parent": "task-6-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "implementation"
      }
    },
    "phase-6-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-6",
      "children": [
        "verify-6-1",
        "verify-6-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-6-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-6-1": {
      "type": "verify",
      "title": "sdd-next documentation is clear and accurate",
      "status": "pending",
      "parent": "phase-6-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Documentation clearly explains integration, configuration, and fail-fast behavior",
        "command": ""
      }
    },
    "verify-6-2": {
      "type": "verify",
      "title": "Integration doesn't break existing sdd-next workflow",
      "status": "pending",
      "parent": "phase-6-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Can still use sdd-next without fidelity review if not configured",
        "command": ""
      }
    },
    "phase-7": {
      "type": "phase",
      "title": "Documentation, Testing & Polish",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-7-files",
        "phase-7-verify"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-6"
        ],
        "depends": []
      },
      "total_tasks": 8,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Comprehensive documentation and quality assurance",
        "risk_level": "low",
        "estimated_hours": 10
      }
    },
    "phase-7-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-7",
      "children": [
        "task-7-1",
        "task-7-2",
        "task-7-3",
        "task-7-4",
        "task-7-5"
      ],
      "total_tasks": 5,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-7-verify"
        ]
      }
    },
    "task-7-1": {
      "type": "task",
      "title": "Complete SKILL.md with comprehensive documentation",
      "status": "pending",
      "parent": "phase-7-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "skills/sdd-fidelity-review/SKILL.md",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Add overview, workflow, CLI reference, patterns, best practices"
      }
    },
    "task-7-2": {
      "type": "task",
      "title": "tests/test_sdd_fidelity_review.py",
      "status": "pending",
      "parent": "phase-7-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-7-3"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_sdd_fidelity_review.py",
        "task_category": "implementation",
        "estimated_hours": 4,
        "description": "Unit tests for artifact gathering, configuration, tool checking"
      }
    },
    "task-7-3": {
      "type": "task",
      "title": "tests/integration/test_fidelity_review_integration.py",
      "status": "pending",
      "parent": "phase-7-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-7-2"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/integration/test_fidelity_review_integration.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Integration tests with mock AI tools and end-to-end workflow"
      }
    },
    "task-7-4": {
      "type": "task",
      "title": "Update README.md with new skill",
      "status": "pending",
      "parent": "phase-7-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "README.md",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Add sdd-fidelity-review to skill list and feature overview"
      }
    },
    "task-7-5": {
      "type": "task",
      "title": "docs/examples/fidelity-review-example.md",
      "status": "pending",
      "parent": "phase-7-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "docs/examples/fidelity-review-example.md",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Create example walkthrough of fidelity review workflow"
      }
    },
    "phase-7-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-7",
      "children": [
        "verify-7-1",
        "verify-7-2",
        "verify-7-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-7-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-7-1": {
      "type": "verify",
      "title": "All unit tests pass",
      "status": "pending",
      "parent": "phase-7-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest tests/test_sdd_fidelity_review.py -v",
        "expected": "All tests pass"
      }
    },
    "verify-7-2": {
      "type": "verify",
      "title": "Integration tests pass",
      "status": "pending",
      "parent": "phase-7-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest tests/integration/test_fidelity_review_integration.py -v",
        "expected": "All integration tests pass"
      }
    },
    "verify-7-3": {
      "type": "verify",
      "title": "Documentation is complete and clear",
      "status": "pending",
      "parent": "phase-7-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "SKILL.md, CONFIG.md, examples, and README updates are comprehensive",
        "command": ""
      }
    }
  },
  "journal": [
    {
      "timestamp": "2025-11-05T18:40:42.124424Z",
      "entry_type": "status_change",
      "title": "Task Completed: Add frontmatter with name, description, model, required_information",
      "author": "claude-code",
      "content": "Created agents/sdd-fidelity-review.md with complete frontmatter including name (sdd-fidelity-review-subagent), description (Review implementation fidelity against specifications), model (sonnet), and required_information for all review types (full_review, task_review, file_review, deviation_analysis). Added comprehensive agent documentation including contract validation, review workflows, error handling, and integration guidance.",
      "metadata": {},
      "task_id": "task-1-1-1"
    },
    {
      "timestamp": "2025-11-05T18:41:25.943404Z",
      "entry_type": "status_change",
      "title": "Task Completed: Add contract validation section with required parameters",
      "author": "claude-code",
      "content": "Added comprehensive Contract Validation section (lines 43-73) documenting required parameters for all review types (full_review, task_review, file_review, deviation_analysis). Included validation checklists with \u2705 markers for required vs optional fields, and structured error response format for missing information. Mirrors pattern from run-tests and other subagents.",
      "metadata": {},
      "task_id": "task-1-1-2"
    },
    {
      "timestamp": "2025-11-05T18:42:09.606417Z",
      "entry_type": "status_change",
      "title": "Task Completed: Add skill invocation instructions and error handling",
      "author": "claude-code",
      "content": "Added Example Invocations section (lines 252-279) with three real-world use cases: full spec review, task-specific review, and deviation analysis. Each example shows proper Task() invocation syntax with subagent_type, prompt, and description. Added Error Handling section (lines 307+) covering missing required information, spec not found, and no implementation found scenarios with clear error message formats.",
      "metadata": {},
      "task_id": "task-1-1-3"
    },
    {
      "timestamp": "2025-11-05T18:43:54.121092Z",
      "entry_type": "status_change",
      "title": "Task Completed: Add frontmatter with name and description",
      "author": "claude-code",
      "content": "Created skills/sdd-fidelity-review/SKILL.md with YAML frontmatter containing name (sdd-fidelity-review) and description (comprehensive single-line summary of skill purpose). File structure follows established pattern from sdd-next and other skills with proper frontmatter format and markdown content sections.",
      "metadata": {},
      "task_id": "task-1-2-1"
    }
  ]
}