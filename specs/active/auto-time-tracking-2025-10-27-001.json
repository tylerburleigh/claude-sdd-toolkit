{
  "spec_id": "auto-time-tracking-2025-10-27-001",
  "generated": "2025-10-27T00:00:00Z",
  "last_updated": "2025-10-28T00:23:03.616026Z",
  "metadata": {
    "title": "Automatic Time Tracking Based on Timestamps",
    "description": "Implement automatic time tracking that calculates actual_hours from started_at and completed_at timestamps instead of requiring manual entry",
    "status": "draft",
    "estimated_hours": 24,
    "complexity": "medium",
    "category": "enhancement"
  },
  "hierarchy": {
    "spec-root": {
      "type": "spec",
      "title": "Automatic Time Tracking Based on Timestamps",
      "status": "pending",
      "parent": null,
      "children": [
        "phase-1",
        "phase-2",
        "phase-3",
        "phase-4",
        "phase-5"
      ],
      "total_tasks": 35,
      "completed_tasks": 0,
      "metadata": {
        "objectives": [
          "Automatically calculate task duration from timestamps when tasks complete",
          "Reset started_at each time a task moves to in_progress",
          "Include blocked time in calculations (simple wall-clock duration)",
          "Auto-calculate spec-level total time as sum of all task times",
          "Remove manual --actual-hours input (clean break)",
          "Maintain data integrity and backward compatibility"
        ]
      }
    },
    "phase-1": {
      "type": "phase",
      "title": "Core Time Calculation Logic",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-1-files",
        "phase-1-verify"
      ],
      "total_tasks": 5,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Add timestamp parsing and duration calculation utilities",
        "risk_level": "low",
        "estimated_hours": 3
      },
      "dependencies": {
        "blocks": [
          "phase-2"
        ]
      }
    },
    "phase-1-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-1",
      "children": [
        "task-1-1"
      ],
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-1-verify"
        ]
      }
    },
    "task-1-1": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_update/time_tracking.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [
        "task-1-1-1",
        "task-1-1-2",
        "task-1-1-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_update/time_tracking.py",
        "estimated_hours": 2,
        "changes": "Add calculate_time_from_timestamps() function with ISO 8601 parsing and duration calculation",
        "task_category": "implementation"
      }
    },
    "task-1-1-1": {
      "type": "subtask",
      "title": "Add calculate_time_from_timestamps() function",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Create function that accepts two ISO 8601 timestamp strings and returns decimal hours",
        "implementation_notes": "Use datetime.fromisoformat() for parsing, calculate timedelta, convert to hours with proper rounding"
      }
    },
    "task-1-1-2": {
      "type": "subtask",
      "title": "Add error handling for invalid timestamps",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-1-1-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Handle None values, invalid ISO format, completed_at before started_at",
        "implementation_notes": "Return None or raise appropriate exceptions with clear error messages"
      }
    },
    "task-1-1-3": {
      "type": "subtask",
      "title": "Add rounding logic for decimal hours",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-1-1-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Round to 0.1 hour precision (6 minute increments) for readability",
        "implementation_notes": "Use round(hours, 1) for consistent formatting"
      }
    },
    "phase-1-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-1",
      "children": [
        "verify-1-1",
        "verify-1-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-1-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-1-1": {
      "type": "verify",
      "title": "Test time calculation with known timestamps",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Function correctly calculates 2.5 hours for 2025-01-01T10:00:00Z to 2025-01-01T12:30:00Z",
        "command": ""
      }
    },
    "verify-1-2": {
      "type": "verify",
      "title": "Test error handling for edge cases",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Function handles None, invalid format, and reversed timestamps gracefully",
        "command": ""
      }
    },
    "phase-2": {
      "type": "phase",
      "title": "Task-Level Auto-Tracking",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-2-files",
        "phase-2-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-3",
          "phase-5"
        ],
        "blocked_by": [
          "phase-1"
        ],
        "depends": []
      },
      "total_tasks": 11,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Integrate automatic time calculation into task completion workflow and clean up manual time entry",
        "risk_level": "medium",
        "estimated_hours": 8
      }
    },
    "phase-2-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-2",
      "children": [
        "task-2-1",
        "task-2-2",
        "task-2-3"
      ],
      "total_tasks": 8,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-2-verify"
        ]
      }
    },
    "task-2-1": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_update/status.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [
        "task-2-1-1",
        "task-2-1-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_update/status.py",
        "estimated_hours": 2,
        "changes": "Modify update_task_status() to reset started_at on EVERY transition to in_progress, not just first time",
        "task_category": "implementation"
      }
    },
    "task-2-1-1": {
      "type": "subtask",
      "title": "Update started_at logic in update_task_status()",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Change condition from 'if new_status == in_progress and old_status == pending' to 'if new_status == in_progress'",
        "implementation_notes": "This ensures started_at is reset each time work resumes, tracking only the latest work session"
      }
    },
    "task-2-1-2": {
      "type": "subtask",
      "title": "Ensure timestamp format consistency",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-2-1-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Verify started_at uses ISO 8601 format compatible with calculation function",
        "implementation_notes": "Should match existing completed_at format"
      }
    },
    "task-2-2": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_update/workflow.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [
        "task-2-2-1",
        "task-2-2-2",
        "task-2-2-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-2-1"
        ]
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_update/workflow.py",
        "estimated_hours": 3,
        "changes": "Update complete_task_workflow() to auto-calculate actual_hours from timestamps",
        "task_category": "implementation"
      }
    },
    "task-2-2-1": {
      "type": "subtask",
      "title": "Add automatic time calculation in complete_task_workflow()",
      "status": "pending",
      "parent": "task-2-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "After status is set to completed, retrieve started_at and completed_at, call calculate_time_from_timestamps(), store in metadata.actual_hours",
        "implementation_notes": "Import calculate_time_from_timestamps from time_tracking module"
      }
    },
    "task-2-2-2": {
      "type": "subtask",
      "title": "Handle missing timestamp edge cases",
      "status": "pending",
      "parent": "task-2-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-2-2-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "If started_at or completed_at is missing, log warning and skip automatic calculation",
        "implementation_notes": "Don't fail the workflow, just skip time tracking for that task"
      }
    },
    "task-2-2-3": {
      "type": "subtask",
      "title": "Update track_time() call to use calculated value",
      "status": "pending",
      "parent": "task-2-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-2-2-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Pass calculated actual_hours to track_time() function instead of user-provided value",
        "implementation_notes": "Simplifies workflow by removing dependency on manual input"
      }
    },
    "task-2-3": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_update/cli.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [
        "task-2-3-1",
        "task-2-3-2",
        "task-2-3-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_update/cli.py",
        "estimated_hours": 2,
        "changes": "Remove --actual-hours flag and track-time command (clean break)",
        "task_category": "implementation"
      }
    },
    "task-2-3-1": {
      "type": "subtask",
      "title": "Remove --actual-hours flag from complete-task command",
      "status": "pending",
      "parent": "task-2-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Remove the --actual-hours parameter from cmd_complete_task function signature and click decorators",
        "implementation_notes": "Clean break - no deprecation warnings needed"
      }
    },
    "task-2-3-2": {
      "type": "subtask",
      "title": "Remove track-time command",
      "status": "pending",
      "parent": "task-2-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Remove cmd_track_time function and its CLI registration",
        "implementation_notes": "Manual time tracking no longer needed with automatic calculation"
      }
    },
    "task-2-3-3": {
      "type": "subtask",
      "title": "Update CLI help text for complete-task",
      "status": "pending",
      "parent": "task-2-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-2-3-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Update help text to mention automatic time tracking from timestamps",
        "implementation_notes": "Add note: 'Time is automatically calculated from started_at and completed_at timestamps'"
      }
    },
    "phase-2-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-2",
      "children": [
        "verify-2-1",
        "verify-2-2",
        "verify-2-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-2-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-2-1": {
      "type": "verify",
      "title": "Test task status transition resets started_at",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "sdd update-status test-spec task-1-1 in_progress (multiple times)",
        "expected": "started_at is updated each time status moves to in_progress"
      }
    },
    "verify-2-2": {
      "type": "verify",
      "title": "Test automatic time calculation on task completion",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "sdd complete-task test-spec task-1-1",
        "expected": "actual_hours is automatically populated in task metadata based on timestamp difference"
      }
    },
    "verify-2-3": {
      "type": "verify",
      "title": "Verify CLI commands no longer accept --actual-hours",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "sdd complete-task --help",
        "expected": "No --actual-hours flag listed; track-time command not found"
      }
    },
    "phase-3": {
      "type": "phase",
      "title": "Spec-Level Time Aggregation",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-3-files",
        "phase-3-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-4"
        ],
        "blocked_by": [
          "phase-2"
        ],
        "depends": []
      },
      "total_tasks": 6,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Automatically calculate total spec time from all task times when spec completes",
        "risk_level": "low",
        "estimated_hours": 4
      }
    },
    "phase-3-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-3",
      "children": [
        "task-3-1",
        "task-3-2"
      ],
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-3-verify"
        ]
      }
    },
    "task-3-1": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_update/time_tracking.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [
        "task-3-1-1",
        "task-3-1-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_update/time_tracking.py",
        "estimated_hours": 2,
        "changes": "Add aggregate_task_times() function to sum all task actual_hours",
        "task_category": "implementation"
      }
    },
    "task-3-1-1": {
      "type": "subtask",
      "title": "Add aggregate_task_times() function",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Create function that traverses hierarchy and sums all task-level actual_hours values",
        "implementation_notes": "Recursively walk hierarchy, collect all nodes with type='task' that have metadata.actual_hours, return sum"
      }
    },
    "task-3-1-2": {
      "type": "subtask",
      "title": "Handle partial completion scenarios",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-3-1-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "If some tasks don't have actual_hours, only sum those that do (graceful partial handling)",
        "implementation_notes": "Skip tasks without actual_hours rather than failing"
      }
    },
    "task-3-2": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/sdd_update/lifecycle.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [
        "task-3-2-1",
        "task-3-2-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-3-1"
        ]
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/sdd_update/lifecycle.py",
        "estimated_hours": 2,
        "changes": "Update complete_spec() to auto-calculate and store spec-level actual_hours",
        "task_category": "implementation"
      }
    },
    "task-3-2-1": {
      "type": "subtask",
      "title": "Call aggregate_task_times() in complete_spec()",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "When completing spec, call aggregate_task_times() to calculate total and store in metadata.actual_hours",
        "implementation_notes": "Import aggregate_task_times from time_tracking module"
      }
    },
    "task-3-2-2": {
      "type": "subtask",
      "title": "Remove --actual-hours parameter from complete-spec CLI",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-3-2-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Remove manual actual_hours parameter from complete_spec() and CLI command",
        "implementation_notes": "Similar to task-level cleanup in Phase 2, make clean break"
      }
    },
    "phase-3-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-3",
      "children": [
        "verify-3-1",
        "verify-3-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-3-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-3-1": {
      "type": "verify",
      "title": "Test spec-level time aggregation",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Complete spec with 3 tasks (2h, 3h, 1.5h) should automatically calculate spec actual_hours as 6.5",
        "command": ""
      }
    },
    "verify-3-2": {
      "type": "verify",
      "title": "Test partial completion handling",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Spec with some tasks missing actual_hours should sum only tasks with times (no errors)",
        "command": ""
      }
    },
    "phase-4": {
      "type": "phase",
      "title": "Schema & Documentation Updates",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-4-files",
        "phase-4-verify"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-3"
        ],
        "depends": []
      },
      "total_tasks": 5,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Update schema and document new automatic tracking behavior",
        "risk_level": "low",
        "estimated_hours": 4
      }
    },
    "phase-4-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-4",
      "children": [
        "task-4-1",
        "task-4-2",
        "task-4-3"
      ],
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-4-verify"
        ]
      }
    },
    "task-4-1": {
      "type": "task",
      "title": "src/claude_skills/schemas/sdd-spec-schema.json",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [
        "task-4-1-1"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/schemas/sdd-spec-schema.json",
        "estimated_hours": 1,
        "changes": "Formally define timestamp and actual_hours fields in schema",
        "task_category": "implementation"
      }
    },
    "task-4-1-1": {
      "type": "subtask",
      "title": "Add timestamp fields to metadata schema",
      "status": "pending",
      "parent": "task-4-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Add started_at, completed_at (type: string, format: date-time) and actual_hours (type: number) to metadata properties",
        "implementation_notes": "Document these fields as optional but automatically populated by workflow"
      }
    },
    "task-4-2": {
      "type": "task",
      "title": "skills/sdd-update/SKILL.md",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [
        "task-4-2-1",
        "task-4-2-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "skills/sdd-update/SKILL.md",
        "estimated_hours": 2,
        "changes": "Update time tracking documentation to explain automatic behavior",
        "task_category": "implementation"
      }
    },
    "task-4-2-1": {
      "type": "subtask",
      "title": "Update time tracking section",
      "status": "pending",
      "parent": "task-4-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Rewrite time tracking section to explain automatic calculation from timestamps",
        "implementation_notes": "Remove references to --actual-hours and track-time command"
      }
    },
    "task-4-2-2": {
      "type": "subtask",
      "title": "Add workflow examples with automatic time tracking",
      "status": "pending",
      "parent": "task-4-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": [
          "task-4-2-1"
        ]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Show example workflow where user starts task, completes task, and time is automatically tracked",
        "implementation_notes": "Emphasize simplicity - no manual time entry needed"
      }
    },
    "task-4-3": {
      "type": "task",
      "title": "docs/DOCUMENTATION.md",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [
        "task-4-3-1"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "docs/DOCUMENTATION.md",
        "estimated_hours": 1,
        "changes": "Update main documentation with automatic time tracking examples",
        "task_category": "implementation"
      }
    },
    "task-4-3-1": {
      "type": "subtask",
      "title": "Update complete-task examples",
      "status": "pending",
      "parent": "task-4-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Update all complete-task command examples to remove --actual-hours flag and mention automatic tracking",
        "implementation_notes": "Add note about how automatic tracking works in Time Tracking section"
      }
    },
    "phase-4-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-4",
      "children": [
        "verify-4-1"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-4-files"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-4-1": {
      "type": "verify",
      "title": "Documentation accuracy review",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "All documentation accurately reflects new automatic tracking behavior with no references to removed commands",
        "command": ""
      }
    },
    "phase-5": {
      "type": "phase",
      "title": "Testing & Verification",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-5-files",
        "phase-5-verify"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-2"
        ],
        "depends": []
      },
      "total_tasks": 8,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Comprehensive testing of automatic time tracking",
        "risk_level": "medium",
        "estimated_hours": 5
      }
    },
    "phase-5-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-5",
      "children": [
        "task-5-1",
        "task-5-2",
        "task-5-3"
      ],
      "total_tasks": 6,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-5-verify"
        ]
      }
    },
    "task-5-1": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/tests/unit/test_sdd_update/test_time_tracking.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [
        "task-5-1-1",
        "task-5-1-2",
        "task-5-1-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/tests/unit/test_sdd_update/test_time_tracking.py",
        "estimated_hours": 2,
        "changes": "Add unit tests for time calculation and aggregation functions",
        "task_category": "implementation"
      }
    },
    "task-5-1-1": {
      "type": "subtask",
      "title": "Test calculate_time_from_timestamps() with valid inputs",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Test various timestamp pairs return correct decimal hours",
        "implementation_notes": "Test cases: 1h, 2.5h, 0.1h, 24h+"
      }
    },
    "task-5-1-2": {
      "type": "subtask",
      "title": "Test edge cases and error handling",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Test None values, invalid formats, completed before started, same timestamp",
        "implementation_notes": "Verify appropriate errors/None returns"
      }
    },
    "task-5-1-3": {
      "type": "subtask",
      "title": "Test aggregate_task_times() function",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Test aggregation with full and partial actual_hours data",
        "implementation_notes": "Test empty hierarchy, single task, multiple tasks, missing times"
      }
    },
    "task-5-2": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/tests/unit/test_sdd_update/test_workflow.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [
        "task-5-2-1",
        "task-5-2-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/tests/unit/test_sdd_update/test_workflow.py",
        "estimated_hours": 2,
        "changes": "Add integration tests for complete_task_workflow with automatic time tracking",
        "task_category": "implementation"
      }
    },
    "task-5-2-1": {
      "type": "subtask",
      "title": "Test complete_task_workflow auto-calculates time",
      "status": "pending",
      "parent": "task-5-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Test that completing a task with timestamps automatically populates actual_hours",
        "implementation_notes": "Mock spec with task in in_progress status with started_at, complete it, verify actual_hours calculated"
      }
    },
    "task-5-2-2": {
      "type": "subtask",
      "title": "Test workflow handles missing timestamps gracefully",
      "status": "pending",
      "parent": "task-5-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Test completing task without started_at doesn't crash, just skips time calculation",
        "implementation_notes": "Verify workflow completes successfully even without timestamps"
      }
    },
    "task-5-3": {
      "type": "task",
      "title": "src/claude_skills/claude_skills/tests/unit/test_sdd_update/test_status.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [
        "task-5-3-1"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/claude_skills/claude_skills/tests/unit/test_sdd_update/test_status.py",
        "estimated_hours": 1,
        "changes": "Add tests for started_at reset behavior",
        "task_category": "implementation"
      }
    },
    "task-5-3-1": {
      "type": "subtask",
      "title": "Test started_at resets on each in_progress transition",
      "status": "pending",
      "parent": "task-5-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "description": "Test moving task to in_progress multiple times updates started_at each time",
        "implementation_notes": "Verify timestamp changes: pending -> in_progress (t1), in_progress -> blocked, blocked -> in_progress (t2, should be different)"
      }
    },
    "phase-5-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-5",
      "children": [
        "verify-5-1",
        "verify-5-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-5-files"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-5-1": {
      "type": "verify",
      "title": "Run full test suite",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "python -m pytest src/claude_skills/claude_skills/tests/unit/test_sdd_update/",
        "expected": "All tests pass with no failures"
      }
    },
    "verify-5-2": {
      "type": "verify",
      "title": "Test backward compatibility with existing specs",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Existing specs in specs/ directory can still be loaded and processed without errors",
        "command": ""
      }
    }
  }
}