# Centralized AI Model Consultation Configuration
#
# This file defines default AI tool settings for the SDD Toolkit. You can
# customise tools, model priorities, consensus rules, and per-skill overrides.
# Generated automatically during `sdd-setup`.
#
# Tip: You can override these defaults at run time with CLI flags such as
# `--model gemini=gemini-2.5-flash` or `--model cursor-agent=composer-2`.

tools:
  gemini:
    command: gemini
    enabled: true
  cursor-agent:
    command: cursor-agent
    enabled: false
  codex:
    command: codex
    enabled: true
  claude:
    command: claude
    enabled: false
  opencode:
    command: opencode
    enabled: false

models:
  gemini:
    priority:
      - pro
      - gemini-2.5-flash
  cursor-agent:
    priority:
      - composer-1
  codex:
    priority:
      - gpt-5-codex
      - gpt-5-codex-mini
  claude:
    priority:
      - sonnet
      - haiku
  opencode:
    priority:
      - gpt-5.1-codex-mini

# Tool/provider fallback priority (consulted in order if earlier tools fail)
tool_priority:
  default:
    - gemini
    - cursor-agent
    - codex
    - claude
    - opencode

# Fallback and retry configuration
fallback:
  enabled: true # Enable automatic fallback to next tool on failure
  max_retries_per_tool: 2 # Number of retries before moving to next tool
  retry_on_status: # Status codes that trigger retry (transient errors)
    - timeout
    - error
  skip_on_status: # Status codes that skip to next tool (permanent errors)
    - not_found
    - invalid_output
  retry_delay_seconds: 1 # Delay between retry attempts

# Consultation limits (per skill invocation)
consultation_limits:
  max_tools_per_run: 4 # Maximum number of unique tools/providers to consult per skill run
consultation:
  timeout_seconds: 600

run-tests:
  tool_priority:
    - gemini
    - cursor-agent
    - codex
    - claude
    - opencode
  models:
    gemini: pro
    cursor-agent: composer-1
    codex: gpt-5-codex
    claude: sonnet
    opencode: gpt-5.1-codex-mini
    # Contextual overrides: use specific models based on failure type
    #overrides:
    #  failure_type:
    #    assertion:
    #      gemini: pro
    #      codex: gpt-5-codex
    #      cursor-agent: composer-1
    #      claude: haiku
    #    timeout:
    #      gemini: gemini-2.5-flash
    #      codex: gpt-5-codex-mini
    #      cursor-agent: composer-1
    #      claude: haiku

code-doc:
  tool_priority:
    - gemini
    - cursor-agent
    - codex
    - claude
    - opencode
  models:
    gemini: gemini-2.5-flash
    cursor-agent: composer-1
    codex: gpt-5-codex
    claude: haiku
    opencode: gpt-5.1-codex-mini
    # Contextual overrides: use specific models based on documentation type
    #overrides:
    #  doc_type:
    #    architecture:
    #      gemini: gemini-2.5-flash
    #      codex: gpt-5-codex
    #      cursor-agent: composer-1
    #    ai_context:
    #      gemini: pro
    #      codex: gpt-5-codex
    #      cursor-agent: composer-1

sdd-plan-review:
  tool_priority:
    - gemini
    - cursor-agent
    - codex
    - claude
    - opencode
  models:
    gemini: pro
    cursor-agent: composer-1
    codex: gpt-5-codex
    claude: sonnet
    opencode: gpt-5.1-codex-mini
    # Contextual overrides: use specific models based on review type
    #overrides:
    #  review_type:
    #    full:
    #      gemini: pro
    #      codex: gpt-5-codex
    #      cursor-agent: composer-1
    #      claude: sonnet
    #    quick:
    #      gemini: gemini-2.5-flash
    #      codex: gpt-5-codex-mini
    #      cursor-agent: composer-1
    #      claude: haiku

sdd-render:
  tool_priority:
    - gemini
    - cursor-agent
    - codex
    - claude
    - opencode
  models:
    gemini: gemini-2.5-flash
    cursor-agent: composer-1
    codex: gpt-5-codex-mini
    claude: haiku
    opencode: gpt-5.1-codex-mini
    # Contextual overrides: use specific models based on feature
    #overrides:
    #  feature:
    #    executive_summary:
    #      gemini: pro
    #      codex: gpt-5-codex
    #      cursor-agent: composer-1
    #      claude: haiku
    #    narrative:
    #      gemini: gemini-2.5-flash
    #      codex: gpt-5-codex-mini
    #      cursor-agent: composer-1
    #      claude: haiku

sdd-fidelity-review:
  tool_priority:
    - gemini
    - cursor-agent
    - codex
    - claude
    - opencode
  models:
    gemini: pro
    cursor-agent: composer-1
    codex: gpt-5-codex
    claude: sonnet
    opencode: gpt-5.1-codex-mini

consensus:
  agents:
    - cursor-agent
    - gemini
    - codex
    - claude
    - opencode
  models:
    gemini: pro
    cursor-agent: composer-1
    codex: gpt-5-codex
    claude: sonnet
    opencode: gpt-5.1-codex-mini
  auto_trigger:
    default: false
    assertion: true
    exception: true
    fixture: true
    import: false
    timeout: true
    flaky: false
    multi-file: true
